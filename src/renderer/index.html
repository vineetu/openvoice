<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com">
  <title>OpenVoice</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Custom titlebar for dragging -->
  <div class="titlebar-drag-region"></div>

  <div id="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-top">
        <div class="brand">
          <div class="brand-icon">
            <img src="../../assets/icon.png" width="22" height="22" alt="OpenVoice">
          </div>
          <span class="brand-name">OpenVoice</span>
        </div>

        <nav class="nav">
          <button class="nav-item active" data-view="home">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
            Home
          </button>
          <button class="nav-item" data-view="dictionary">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
            Dictionary
          </button>
          <button class="nav-item" data-view="settings">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
            Settings
          </button>
          <button class="nav-item" data-view="about">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
            About
          </button>
        </nav>
      </div>

      <div class="sidebar-bottom">
        <div class="sidebar-version">v0.1.0</div>
        <div class="sidebar-credit">Made for Vikram Sriram</div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main">
      <!-- Home View -->
      <div id="view-home" class="view active">
        <div class="main-header">
          <h2 class="view-title">
            Hold <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>Space</kbd> to dictate
          </h2>
          <span id="status-text-mini" class="status-badge">Ready</span>
        </div>

        <!-- Voice orb hero -->
        <section class="hero">
          <div id="orb-container" class="orb-container">
            <div class="orb-ring orb-ring-outer"></div>
            <div class="orb-ring orb-ring-middle"></div>
            <div class="orb-ring orb-ring-inner"></div>
            <div id="orb" class="orb">
              <div class="orb-core"></div>
            </div>
            <div id="waveform" class="waveform">
              <span></span><span></span><span></span><span></span><span></span>
              <span></span><span></span><span></span><span></span>
            </div>
          </div>
          <div id="status-label" class="status-label">Ready to listen</div>
          <div id="hotkey-hint" class="hotkey-hint">Press your hotkey to start</div>
        </section>

        <!-- Download Progress -->
        <section id="download-section" class="download-section hidden">
          <div class="download-card">
            <div class="download-header">
              <span class="download-spinner"></span>
              <span>Downloading Whisper model...</span>
            </div>
            <div class="progress-track">
              <div id="progress-fill" class="progress-fill"></div>
            </div>
            <div class="download-meta">
              <span id="progress-text">0%</span>
              <span id="progress-size" class="download-size"></span>
            </div>
          </div>
        </section>

        <!-- Transcription -->
        <section id="transcription-section" class="transcription-section">
          <div class="card">
            <div class="card-header">
              <span class="card-label">Latest Transcription</span>
              <span id="transcription-timestamp" class="card-meta"></span>
            </div>
            <div id="transcription-text" class="transcription-text">
              Press your hotkey to start dictating
            </div>
          </div>
        </section>
      </div>

      <!-- Dictionary View -->
      <div id="view-dictionary" class="view">
        <div class="main-header">
          <h2 class="view-title">Dictionary</h2>
          <span class="view-subtitle">Custom word replacements</span>
        </div>
        <div class="view-body">
          <div id="dict-entries" class="dict-entries"></div>
          <div id="dict-empty" class="dict-empty">
            <div class="empty-icon">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
            </div>
            <p class="empty-title">No custom words yet</p>
            <p class="empty-hint">Add words Whisper gets wrong</p>
          </div>
          <div class="dict-form">
            <input id="dict-key" type="text" placeholder="Heard as..." class="dict-input">
            <input id="dict-value" type="text" placeholder="Replace with..." class="dict-input">
            <button id="dict-add-btn" class="btn-add">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Settings View -->
      <div id="view-settings" class="view">
        <div class="main-header">
          <h2 class="view-title">Settings</h2>
          <span class="view-subtitle">App configuration</span>
        </div>
        <div class="view-body">
          <div class="setting-row">
            <div class="setting-info">
              <span class="setting-label">Hotkey</span>
              <span class="setting-desc">Trigger recording</span>
            </div>
            <div class="setting-control">
              <input id="setting-hotkey" type="text" readonly class="hotkey-display">
            </div>
          </div>
          <div class="setting-row">
            <div class="setting-info">
              <span class="setting-label">Auto-paste</span>
              <span class="setting-desc">Paste into active window after transcription</span>
            </div>
            <div class="setting-control">
              <label class="toggle">
                <input id="setting-autopaste" type="checkbox">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
          <div class="setting-row">
            <div class="setting-info">
              <span class="setting-label">Launch on startup</span>
              <span class="setting-desc">Start with Windows</span>
            </div>
            <div class="setting-control">
              <label class="toggle">
                <input id="setting-startup" type="checkbox">
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- About View -->
      <div id="view-about" class="view">
        <div class="main-header">
          <h2 class="view-title">About</h2>
          <span class="view-subtitle">v0.1.0</span>
        </div>
        <div class="view-body">
          <div class="about-hero">
            <div class="about-icon">
              <img src="../../assets/icon.png" width="36" height="36" alt="OpenVoice">
            </div>
            <div class="about-app-name">OpenVoice</div>
            <div class="about-tagline">Private voice dictation for Windows</div>
          </div>

          <div class="about-section">
            <div class="about-section-title">How it works</div>
            <p class="about-text">
              Press your hotkey, speak naturally, and your words appear as text in whatever app you're using. OpenVoice records audio from your microphone, transcribes it locally using the Whisper speech model, and pastes the result into your active window.
            </p>
            <p class="about-text">
              Everything runs on your machine. Your voice never leaves your computer &mdash; no cloud services, no API keys, no internet required after the initial model download.
            </p>
          </div>

          <div class="about-section">
            <div class="about-section-title">Speech model</div>
            <div class="about-detail-row">
              <span class="about-detail-label">Model</span>
              <span class="about-detail-value">Distil-Whisper Large v3.5</span>
            </div>
            <div class="about-detail-row">
              <span class="about-detail-label">By</span>
              <span class="about-detail-value">Hugging Face</span>
            </div>
            <div class="about-detail-row">
              <span class="about-detail-label">Runs via</span>
              <span class="about-detail-value">whisper.cpp (local, offline)</span>
            </div>
          </div>

          <div class="about-section">
            <div class="about-section-title">Built with</div>
            <div class="about-detail-row">
              <span class="about-detail-label">App</span>
              <span class="about-detail-value">Electron</span>
            </div>
            <div class="about-detail-row">
              <span class="about-detail-label">Code</span>
              <span class="about-detail-value">Claude Code by Anthropic</span>
            </div>
          </div>

        </div>
      </div>
    </main>
  </div>
  <script src="renderer.js"></script>
</body>
</html>
